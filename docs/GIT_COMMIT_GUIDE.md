# Git æäº¤è§„èŒƒæŒ‡å—

æœ¬é¡¹ç›®ä½¿ç”¨æ ‡å‡†çš„ Git æäº¤è§„èŒƒï¼Œé€šè¿‡ `commitizen`ã€`husky`ã€`lint-staged` å’Œ `cz-git` å·¥å…·æ¥ç¡®ä¿æäº¤ä¿¡æ¯çš„è§„èŒƒæ€§å’Œä»£ç è´¨é‡ã€‚

## ğŸ› ï¸ å·¥å…·é…ç½®

### å·²å®‰è£…çš„å·¥å…·

- **commitizen**: äº¤äº’å¼æäº¤ä¿¡æ¯ç”Ÿæˆå·¥å…·
- **cz-git**: ä¸­æ–‡å‹å¥½çš„ commitizen é€‚é…å™¨
- **husky**: Git hooks ç®¡ç†å·¥å…·
- **lint-staged**: æš‚å­˜æ–‡ä»¶æ£€æŸ¥å·¥å…·
- **@commitlint/cli**: æäº¤ä¿¡æ¯è§„èŒƒæ£€æŸ¥å·¥å…·
- **@commitlint/config-conventional**: æ ‡å‡†æäº¤è§„èŒƒé…ç½®

### é…ç½®æ–‡ä»¶

- `.cz.json`: commitizen é…ç½®ï¼ˆä¸­æ–‡ç•Œé¢ï¼‰
- `commitlint.config.js`: commitlint è§„åˆ™é…ç½®
- `.husky/`: husky é’©å­é…ç½®
- `package.json`: lint-staged é…ç½®

## ğŸ“ æäº¤ä¿¡æ¯æ ¼å¼

### åŸºæœ¬æ ¼å¼

```
<type>(<scope>): <subject>

<body>

<footer>
```

### ç±»å‹ (type)

| ç±»å‹       | æè¿°                     | ç¤ºä¾‹                                         |
| ---------- | ------------------------ | -------------------------------------------- |
| `feat`     | æ–°åŠŸèƒ½                   | `feat(core): æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨æ”¯æŒ`             |
| `fix`      | ä¿®å¤bug                  | `fix(utils): ä¿®å¤URLæ‹¼æ¥é—®é¢˜`                |
| `docs`     | æ–‡æ¡£å˜æ›´                 | `docs: æ›´æ–°APIæ–‡æ¡£`                          |
| `style`    | ä»£ç æ ¼å¼ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰   | `style: ä¿®å¤ä»£ç æ ¼å¼é—®é¢˜`                    |
| `refactor` | ä»£ç é‡æ„                 | `refactor(types): é‡æ„ç±»å‹å®šä¹‰`              |
| `perf`     | æ€§èƒ½ä¼˜åŒ–                 | `perf(core): ä¼˜åŒ–è¯·æ±‚æ€§èƒ½`                   |
| `test`     | å¢åŠ æµ‹è¯•                 | `test(utils): æ·»åŠ å·¥å…·å‡½æ•°æµ‹è¯•`              |
| `build`    | æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨ | `build: æ›´æ–°æ„å»ºé…ç½®`                        |
| `ci`       | ä¿®æ”¹CIé…ç½®æ–‡ä»¶å’Œè„šæœ¬     | `ci: æ·»åŠ GitHub Actions`                     |
| `chore`    | æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨ | `chore: æ›´æ–°ä¾èµ–ç‰ˆæœ¬`                        |
| `revert`   | å›æ»š                     | `revert: å›æ»šfeat(core): æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨æ”¯æŒ` |

### èŒƒå›´ (scope)

| èŒƒå›´           | æè¿°     |
| -------------- | -------- |
| `core`         | æ ¸å¿ƒåŠŸèƒ½ |
| `interceptors` | æ‹¦æˆªå™¨   |
| `utils`        | å·¥å…·å‡½æ•° |
| `types`        | ç±»å‹å®šä¹‰ |
| `docs`         | æ–‡æ¡£     |
| `tests`        | æµ‹è¯•     |
| `config`       | é…ç½®     |
| `deps`         | ä¾èµ–     |

### ä¸»é¢˜ (subject)

- ä½¿ç”¨ä¸­æ–‡æè¿°
- ä¸è¶…è¿‡50ä¸ªå­—ç¬¦
- é¦–å­—æ¯å°å†™
- ç»“å°¾ä¸åŠ å¥å·

### æ­£æ–‡ (body)

- è¯¦ç»†æè¿°å˜æ›´å†…å®¹
- ä½¿ç”¨ `|` æ¢è¡Œ
- å¯é€‰å­—æ®µ

### é¡µè„š (footer)

- å…³è”çš„issue
- ç ´åæ€§å˜æ›´è¯´æ˜
- å¯é€‰å­—æ®µ

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. ä½¿ç”¨ commitizen æäº¤

```bash
# ä½¿ç”¨äº¤äº’å¼æäº¤
pnpm commit
# æˆ–
npx cz
```

### 2. ç›´æ¥ä½¿ç”¨ git commit

```bash
# æ ‡å‡†æ ¼å¼
git commit -m "feat(core): æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨æ”¯æŒ"

# å¸¦è¯¦ç»†æè¿°
git commit -m "feat(core): æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨æ”¯æŒ

- æ”¯æŒè¯·æ±‚æ‹¦æˆªå™¨
- æ”¯æŒå“åº”æ‹¦æˆªå™¨
- æ”¯æŒé”™è¯¯å¤„ç†æ‹¦æˆªå™¨"
```

## ğŸ”§ è‡ªåŠ¨åŒ–æµç¨‹

### Pre-commit é’©å­

åœ¨æäº¤å‰è‡ªåŠ¨æ‰§è¡Œï¼š

1. **lint-staged**: å¯¹æš‚å­˜çš„æ–‡ä»¶æ‰§è¡Œä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ–
   - TypeScript/JavaScript æ–‡ä»¶ï¼šESLint + Prettier
   - JSON/Markdown æ–‡ä»¶ï¼šPrettier

### Commit-msg é’©å­

åœ¨æäº¤ä¿¡æ¯å†™å…¥åè‡ªåŠ¨æ‰§è¡Œï¼š

1. **commitlint**: æ£€æŸ¥æäº¤ä¿¡æ¯æ ¼å¼æ˜¯å¦ç¬¦åˆè§„èŒƒ

## ğŸ“‹ æäº¤ç¤ºä¾‹

### æ–°åŠŸèƒ½

```
feat(core): æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨æ”¯æŒ

- æ”¯æŒè¯·æ±‚æ‹¦æˆªå™¨é“¾å¼è°ƒç”¨
- æ”¯æŒå¼‚æ­¥æ‹¦æˆªå™¨
- æ”¯æŒæ‹¦æˆªå™¨é”™è¯¯å¤„ç†

Closes #123
```

### ä¿®å¤bug

```
fix(utils): ä¿®å¤URLæ‹¼æ¥é—®é¢˜

ä¿®å¤å½“baseURLä»¥/ç»“å°¾ä¸”urlä»¥/å¼€å¤´æ—¶çš„é‡å¤æ–œæ é—®é¢˜
```

### æ–‡æ¡£æ›´æ–°

```
docs: æ›´æ–°APIæ–‡æ¡£

- æ·»åŠ æ‹¦æˆªå™¨ä½¿ç”¨ç¤ºä¾‹
- æ›´æ–°é”™è¯¯å¤„ç†è¯´æ˜
- å®Œå–„ç±»å‹å®šä¹‰æ–‡æ¡£
```

### ä»£ç é‡æ„

```
refactor(types): é‡æ„ç±»å‹å®šä¹‰

- æå–å…¬å…±æ¥å£ç±»å‹
- ä¼˜åŒ–ç±»å‹ç»§æ‰¿ç»“æ„
- å¢å¼ºç±»å‹å®‰å…¨æ€§
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æäº¤å‰æ£€æŸ¥**: ç¡®ä¿ä»£ç é€šè¿‡æ‰€æœ‰æµ‹è¯•å’Œlintæ£€æŸ¥
2. **åŸå­æ€§æäº¤**: æ¯æ¬¡æäº¤åªåŒ…å«ä¸€ä¸ªé€»è¾‘å˜æ›´
3. **æè¿°æ¸…æ™°**: æäº¤ä¿¡æ¯è¦æ¸…æ™°æè¿°å˜æ›´å†…å®¹
4. **èŒƒå›´å‡†ç¡®**: é€‰æ‹©åˆé€‚çš„scopeèŒƒå›´
5. **ç±»å‹æ­£ç¡®**: é€‰æ‹©æ­£ç¡®çš„æäº¤ç±»å‹

## ğŸ› å¸¸è§é—®é¢˜

### Q: æäº¤ä¿¡æ¯æ ¼å¼ä¸æ­£ç¡®æ€ä¹ˆåŠï¼Ÿ

A: ä½¿ç”¨ `git commit --amend` ä¿®æ”¹æœ€åä¸€æ¬¡æäº¤ä¿¡æ¯ï¼Œæˆ–ä½¿ç”¨ `git rebase -i` ä¿®æ”¹å†å²æäº¤ã€‚

### Q: å¦‚ä½•è·³è¿‡é’©å­æ£€æŸ¥ï¼Ÿ

A: ä½¿ç”¨ `git commit --no-verify` è·³è¿‡é’©å­æ£€æŸ¥ï¼ˆä¸æ¨èï¼‰ã€‚

### Q: lint-staged æ£€æŸ¥å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

A: æ ¹æ®é”™è¯¯ä¿¡æ¯ä¿®å¤ä»£ç é—®é¢˜ï¼Œç„¶åé‡æ–°æäº¤ã€‚

### Q: å¦‚ä½•ä¿®æ”¹ commitizen é…ç½®ï¼Ÿ

A: ç¼–è¾‘ `.cz.json` æ–‡ä»¶ï¼Œä¿®æ”¹ç±»å‹ã€èŒƒå›´ç­‰é…ç½®ã€‚

## ğŸ“š ç›¸å…³é“¾æ¥

- [Conventional Commits](https://www.conventionalcommits.org/)
- [Commitizen](https://github.com/commitizen/cz-cli)
- [cz-git](https://github.com/Zhengqbbb/cz-git)
- [Husky](https://github.com/typicode/husky)
- [lint-staged](https://github.com/okonet/lint-staged)
- [Commitlint](https://github.com/conventional-changelog/commitlint)
